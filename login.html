<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <script src="https://kit.fontawesome.com/f9d1bb2373.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./login-singup.css">
    <title>Login</title>
</head>
<body>
    <nav class="navbar">   
        <ul class="nav-item1">
        <h1><img src="./logo-removebg-preview.png" alt="" height="50px"></h1>
            <li><a href="./index.html">Woman</a></li>
            <li><a href="./index.html">Man</a></li>
            <li><a href="">Mobile</a></li>
            <li><a href="">Baby</a></li>
        </ul>
        <button class="nav-toggle" type="button" aria-label="Toggle navigation" aria-expanded="false">
            <i class="fa-solid fa-bars"></i>
        </button>
        <ul class="nav-item2">
            <h1><a href="./index.html"><i class="fa-solid fa-user-plus fa-1x"></i></a></h1>
            <h1><a href="./login.html"><i class="fa-solid fa-right-to-bracket fa-1x"></i></a></h1>
            <!-- <h1><a href="./index.html" <i class="fa-solid fa-cart-shopping fa-1x"></i></a></h1> -->
        </ul>
    </nav>
    <div class="sidebar-overlay"></div>
    <aside class="mobile-sidebar" aria-hidden="true">
        <div class="sidebar-header">
            <h3>Menu</h3>
            <button class="sidebar-close" type="button" aria-label="Close sidebar">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="sidebar-user-block">
            <div id="sidebarUserInitial" class="sidebar-avatar">G</div>
            <div>
                <p class="sidebar-user-title">Account</p>
                <p id="sidebarUserName" class="sidebar-user-name">Account</p>
            </div>
        </div>
        <a class="sidebar-link" href="./index.html">Woman</a>
        <a class="sidebar-link" href="./index.html">Man</a>
        <a class="sidebar-link" href="#">Mobile</a>
        <a class="sidebar-link" href="#">Baby</a>
        <div class="sidebar-actions">
            <a class="sidebar-action" href="./index.html" aria-label="Signup"><i class="fa-solid fa-user-plus"></i></a>
            <a class="sidebar-action" href="./login.html" aria-label="Login"><i class="fa-solid fa-right-to-bracket"></i></a>
        </div>
        <a class="sidebar-logout" href="./login.html">Logout</a>
    </aside>
    <section class="Signup">
        <h1 class="Sig">Login</h1>
        <form action="" id="login">
         <input type="email" id="email" placeholder="Enter Email" class="login" required>
         <br><br>
         <input type="password" id="password" placeholder="Enter Password" class="" required>
         <br><br>
         <p id="alert" class="form-alert"></p>
         <input type="submit" value="Submit" class="button" >
         <br>
         <a class="p" href="./index.html">New User?</a>
        </form>
     </section>
</body>
</html>

<script>
var nav = document.querySelector(".navbar");
var navToggle = document.querySelector(".nav-toggle");
var sidebar = document.querySelector(".mobile-sidebar");
var sidebarOverlay = document.querySelector(".sidebar-overlay");
var sidebarClose = document.querySelector(".sidebar-close");
var currentSessionUser = JSON.parse(localStorage.getItem("currentUser")) || null;
var sidebarUserInitial = document.getElementById("sidebarUserInitial");
var sidebarUserName = document.getElementById("sidebarUserName");
if (currentSessionUser) {
    if (sidebarUserInitial) sidebarUserInitial.textContent = (currentSessionUser.Name || "G").trim().charAt(0).toUpperCase();
    if (sidebarUserName) sidebarUserName.textContent = "Account";
}
function closeSidebar() {
    if (!sidebar || !sidebarOverlay || !navToggle) return;
    document.body.classList.remove("sidebar-open");
    sidebar.classList.remove("open");
    sidebarOverlay.classList.remove("show");
    sidebar.setAttribute("aria-hidden", "true");
    navToggle.setAttribute("aria-expanded", "false");
    navToggle.innerHTML = '<i class="fa-solid fa-bars"></i>';
}
if (nav && navToggle) {
    navToggle.addEventListener("click", function () {
        var isOpen = sidebar.classList.toggle("open");
        document.body.classList.toggle("sidebar-open", isOpen);
        sidebarOverlay.classList.toggle("show", isOpen);
        sidebar.setAttribute("aria-hidden", isOpen ? "false" : "true");
        navToggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
        navToggle.innerHTML = isOpen ? '<i class="fa-solid fa-xmark"></i>' : '<i class="fa-solid fa-bars"></i>';
    });
}
if (sidebarClose) sidebarClose.addEventListener("click", closeSidebar);
if (sidebarOverlay) sidebarOverlay.addEventListener("click", closeSidebar);
if (sidebar) {
    sidebar.querySelectorAll("a").forEach(function (link) {
        link.addEventListener("click", closeSidebar);
    });
}
window.addEventListener("resize", function () {
    if (window.innerWidth > 992) closeSidebar();
});

document.querySelector("form").addEventListener("submit", function(event) {
    event.preventDefault();

    var UserLogin = JSON.parse(localStorage.getItem("UserCred")) || JSON.parse(localStorage.getItem("userCred")) || [];
    var email = document.getElementById("email").value.trim().toLowerCase();
    var password = document.getElementById("password").value.trim();
    var alertBox = document.getElementById("alert");
    var foundUser = false;
    var currentUser = null;

    for (var i = 0; i < UserLogin.length; i++) {
        var storedEmail = (UserLogin[i].Email || "").trim().toLowerCase();
        var storedPassword = (UserLogin[i].Password || "").trim();
        if (email === storedEmail && password === storedPassword) {
            foundUser = true;
            currentUser = {
                Name: UserLogin[i].Name || "",
                Email: UserLogin[i].Email || "",
                Phone: UserLogin[i].Phone || ""
            };
            break;
        }
    }

    if (foundUser) {
        localStorage.setItem("currentUser", JSON.stringify(currentUser));
        if (sidebarUserInitial) sidebarUserInitial.textContent = (currentUser.Name || "G").trim().charAt(0).toUpperCase();
        if (sidebarUserName) sidebarUserName.textContent = "Account";
        alertBox.textContent = "Login successful. Redirecting...";
        alertBox.className = "form-alert success";
        setTimeout(function () {
            window.location.href = "Men.html";
        }, 400);
    } else {
        alertBox.textContent = "Incorrect email or password. Please try again.";
        alertBox.className = "form-alert error";
    }
});


</script>
